<!DOCTYPE html>
<html>

<head>
    <title>Document</title>
    <link rel="stylesheet" href="databunds.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://kit.fontawesome.com/10c0479800.js" crossorigin="anonymous">
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lobster&family=Rubik+Glitch+Pop&family=Sue+Ellen+Francisco&display=swap"
        rel="stylesheet">
</head>

<body>
    <nav>
        <div class="logo">
            <img src="https://static.vecteezy.com/system/resources/thumbnails/021/054/553/small_2x/3d-gold-effect-letter-a-free-png.png"
                alt="">
            <h1>bundsðŸ’²ðŸ’²</h1>
        </div>

        <button class="menu-bar" onclick="openmenu()">
            <a class="fa fa-bars" aria-hidden="true"></a>
        </button>

    </nav>

    <h1 class="welcome-h1">
        Buy Data
    </h1>

    <div class="menu-box" id="menu">
        <div class="right-links">
            <button onclick="closemenu()"><i class="fa-sharp fa-solid fa-xmark"></i></button>
        </div>
        <div class="menu-links">
            <a href="homepage.html">Dashboard</a>
            <a href="walletfund.html">Fund Wallet</a>
            <a href="airtime.html">Airtime</a>
            <a href="databunds.html">Data bunds</a>
        </div>
    </div>

    <div class="amount">
        <h3>Current balance

            <i onclick="toggleBalance()" style="margin-left: 5px; " class="eyes fa-solid fa-eye"></i>

        </h3>
        <h2 class="balance show">â‚¦50,000.00</h2>
        <h2 class="star hidden">****</h2>
    </div>

    <div class="options">
        <select class="provider-icon"
            name="manual-provider-icon" id="provider-icon">
        </select>
        <input placeholder="0xx xxxx xxxx" type="text" id="phone-input" />
    </div>

    <button class="submit">
        <a href="">
            Submit
        </a>
    </button>



    <script>
        var balance = document.querySelector('.balance')

        var hiddenBalance = document.querySelector('.star')

        var eyes = document.querySelector('.eyes')

        var menu = document.getElementById("menu");


        function toggleBalance() {
            if (balance.classList.contains('show')) {

                balance.classList.remove('show')
                balance.classList.add('hidden')
                eyes.classList.remove('fa-eye')
                eyes.classList.add('fa-eye-slash')



                hiddenBalance.classList.remove('hidden')

            } else {
                hiddenBalance.classList.add('hidden')
                balance.classList.remove('hidden')
                balance.classList.add('show')
                eyes.classList.remove('fa-eye-slash')
                eyes.classList.add('fa-eye')
            }


        }


        function closemenu() {
            menu.style.top = "-100vh";
            menu.classList.remove('backdrop')
        }
        function openmenu() {
            menu.style.top = "16%";
            menu.classList.add('backdrop')
        }
        //


        let MTN_PREFIX = ['0803', '0806', '0814', '0810', '0813', '0906', '0816', '0703', '0706', '0903', '0916'];
        let GLO_PREFIX = ['0805', '0807', '0811', '0815', '0705', '0905', '0919'];
        let NINE_MOBILE_PREFIX = ['0809', '0817', '0818', '0908', '0909'];
        let AIRTEL_PREFIX = ['0802', '0808', '0812', '0708', '0701', '0902', '0901', '0907'];

        let MTN_ICON = './image/mtnlogo.jpg';
        let GLO_LOGO = './image/glologo.png';
        let NINE_MOBILE_LOGO = './image/9mobile.webp';
        let AIRTEL_LOGO = './image/airtellogo.png';

        const providerSelect = document.getElementById('provider-icon');
        const inputField = document.getElementById('phone-input');

        // Populate the dropdown with options dynamically
        function populateDropdown() {
            const options = [
                { value: 'MTN', iconUrl: MTN_ICON },
                { value: 'GLO', iconUrl: GLO_LOGO },
                { value: '9MOBILE', iconUrl: NINE_MOBILE_LOGO },
                { value: 'AIRTEL', iconUrl: AIRTEL_LOGO }
            ];

            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option.value;
                optionElement.style.backgroundImage = `url(${option.iconUrl})`;
                providerSelect.appendChild(optionElement);
            });
        }

        // Call the function to populate dropdown on page load
        populateDropdown();

        inputField.addEventListener('input', function () {
            const inputValue = this.value.trim();
            let providerIconUrl = '';

            // Check if the entered value starts with any of the prefixes
            if (MTN_PREFIX.some(prefix => inputValue.startsWith(prefix))) {
                providerIconUrl = MTN_ICON;
            } else if (GLO_PREFIX.some(prefix => inputValue.startsWith(prefix))) {
                providerIconUrl = GLO_LOGO;
            } else if (NINE_MOBILE_PREFIX.some(prefix => inputValue.startsWith(prefix))) {
                providerIconUrl = NINE_MOBILE_LOGO;
            } else if (AIRTEL_PREFIX.some(prefix => inputValue.startsWith(prefix))) {
                providerIconUrl = AIRTEL_LOGO;
            } else {
                console.log('No prefix matched');
            }

            updateProviderIcon(providerIconUrl);
        });

        function updateProviderIcon(iconUrl) {
            // Reset the dropdown to have no selected option
            providerSelect.selectedIndex = -1;

            // Set the background image of the dropdown to the selected provider icon
            providerSelect.style.backgroundImage = `url(${iconUrl})`;
        }
    </script>

</body>

</html>